
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Chapitre 1 - Le R√©veil sur l'√éle</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Georgia', serif;
      background: linear-gradient(to bottom, #001f33, #00394d);
      color: #f0f8ff;
    }
    #container {
      max-width: 900px;
      margin: auto;
      padding: 2rem;
      background-color: rgba(0, 0, 0, 0.7);
      border-radius: 1rem;
    }
    h1 {
      text-align: center;
      font-size: 2.8rem;
    }
    p {
      font-size: 1.2rem;
      line-height: 1.8;
    }
    button {
      background-color: #00acc1;
      color: #002f3d;
      font-weight: bold;
      border: none;
      border-radius: 0.6rem;
      padding: 0.8rem 1.5rem;
      margin-top: 1rem;
      cursor: pointer;
      font-size: 1.1rem;
    }
    input[type="text"] {
      padding: 0.6rem;
      font-size: 1.1rem;
      width: 80%;
      margin-top: 1rem;
      border-radius: 8px;
      border: none;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div id="container">
    <h1>Chapitre 1 ‚Äì Le R√©veil sur l'√éle</h1>
    <p>Un souffle marin. Tu te r√©veilles lentement sur une plage inconnue. Deux chemins s‚Äôoffrent √† toi :</p>
    <button onclick="startPath('sentier')">üå∏ Suivre le sentier fleuri</button>
    <button onclick="startPath('rochers')">üåä Escalader les rochers pr√®s de la mer</button>

    <div id="content" class="hidden"></div>
  </div>

  <script>
    let essais = 0;
    let essaisSouvenir = 0;

    function normalize(txt) {
      return txt.toLowerCase().replace(/[‚Äô']/g, "").trim();
    }

    function startPath(path) {
      const content = document.getElementById('content');
      content.classList.remove('hidden');
      essais = 0;
      essaisSouvenir = 0;

      if (path === 'sentier') {
        content.innerHTML = `
          <p>Un renard vert te m√®ne √† un arbre sculpt√©. Tu lis :</p>
          <p><strong>‚ÄúJe suis la couleur de l‚Äôespoir, de la mer, et ta pr√©f√©r√©e. Qui suis-je ?‚Äù</strong></p>
          <input type="text" id="reponse" placeholder="Ta r√©ponse...">
          <button onclick="verifierEnigme('vert', 'sentierSuite')">Valider</button>
          <p id="feedback"></p>
        `;
      } else {
        content.innerHTML = `
          <p>Le vent murmure : ‚ÄúQuel mot as-tu r√©p√©t√© 22 fois pour qu‚Äôelle le croie ?‚Äù</p>
          <input type="text" id="reponse" placeholder="Ta r√©ponse...">
          <button onclick="verifierEnigme('jetaime', 'rochersSuite')">Valider</button>
          <p id="feedback"></p>
        `;
      }
    }

    function verifierEnigme(repJuste, nextStep) {
      const input = document.getElementById('reponse').value;
      const feedback = document.getElementById('feedback');
      const clean = normalize(input);
      essais++;

      if (clean.replace(/\s/g, '') === normalize(repJuste).replace(/\s/g, '')) {
        feedback.style.color = "lightgreen";
        feedback.innerText = "Bonne r√©ponse. Tu avances vers la suite...";
        setTimeout(() => {
          if (nextStep === 'sentierSuite') sentierSuite();
          if (nextStep === 'rochersSuite') rochersSuite();
        }, 1500);
      } else {
        feedback.style.color = "salmon";
        if (essais >= 3) {
          if (repJuste === 'vert') {
            feedback.innerText = "Indice : pense √† la couleur de la nature et de l'espoir.";
          } else {
            feedback.innerText = "Indice : trois mots, souvent r√©p√©t√©s quand on aime vraiment.";
          }
        } else {
          feedback.innerText = "Essaie encore...";
        }
      }
    }

    function sentierSuite() {
      document.getElementById('content').innerHTML = `
        <p>Tu d√©couvres un vieux carnet. Une photo : votre premier rendez-vous. O√π √©tiez-vous ?</p>
        <input type="text" id="souvenir" placeholder="Lieu du 1er date...">
        <button onclick="verifierSouvenir('restaurant')">Valider</button>
        <p id="resultat"></p>
      `;
    }

    function rochersSuite() {
      document.getElementById('content').innerHTML = `
        <p>Un coquillage s‚Äôouvre. √Ä l‚Äôint√©rieur, une rose en papier. Un murmure : ‚ÄúDeuxi√®me rendez-vous‚Ä¶ O√π √©tiez-vous ?‚Äù</p>
        <input type="text" id="souvenir" placeholder="Lieu du 2e date...">
        <button onclick="verifierSouvenir('complexe desjardins')">Valider</button>
        <p id="resultat"></p>
      `;
    }

    function verifierSouvenir(correct) {
      const val = document.getElementById("souvenir").value;
      const result = document.getElementById("resultat");
      essaisSouvenir++;

      if (normalize(val).includes(normalize(correct))) {
        result.style.color = "lightgreen";
        result.innerText = "Tu t‚Äôen souviens. L‚Äô√Æle t‚Äôaccepte. Fin du chapitre 1.";
      } else {
        result.style.color = "salmon";
        if (essaisSouvenir >= 3) {
          result.innerText = "Indice : un lieu simple, fr√©quent√© souvent, pas tr√®s loin du centre-ville.";
        } else {
          result.innerText = "Pas encore‚Ä¶ r√©fl√©chis √† ce moment sp√©cial.";
        }
      }
    }
  </script>
</body>
</html>
